<html>
	<head>
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.1.1/math.js"></script>
	<link rel="stylesheet" href="style.css">
	<script src="js/jactivity.js"></script>
	<script src="js/deviceorientation.js"></script>
	<script src="js/devicemotion.js"></script>
	<script src="js/transformer.js"></script>
	<script src="js/decisiontree_engine.js"></script>
	<script src="js/validation.js"></script>
	</head>
<body>
<div class="activity" id="activity"> Activity is not being tracked
</div>

<script>
function mean(values) {
	var sum = values.reduce(function(a, b) { return a + b; });
	return Math.floor(sum * 1000 / values.length);
}
function joinDimensions(dim1, meanDim1, dim2, meanDim2, dim3, meanDim3) {
  return Math.sqrt((dim1 - meanDim1)**2+(dim2 - meanDim2)**2+(dim3 - meanDim3)**2)
}
	
var lastClass;
	var activityCallback = function(activity) {
		console.log("react to classification which classify to: " + activity.result);
		if (activity.result === lastClass || lastClass == null) {
			document.getElementById("activity").innerHTML = activity.result;
			switch (activity.result) {
				case "walking":
					document.body.style.fontSize = "1.2em";
					document.getElementById("activity").style.fontWeight = "bold";
					document.getElementById("activity").style.color = "red";
					break;
				case "sitting":
					document.body.style.fontSize = "1.0em";
					document.getElementById("activity").style.fontWeight = "normal";
					document.getElementById("activity").style.color = "blue";
					break;
				default:
					document.getElementById("activity").style.fontSize = "1.0em";
					document.getElementById("activity").style.fontWeight = "normal";
					document.getElementById("activity").style.color = "black";
			}
		}
		lastClass = activity.result;
	}
	//initialize classifier
	var activityClassifier = new jActivity("", [deviceorientation, devicemotion], activityCallback, ["walking", "sitting"], 1000);
</script>
</body>
</html>
